% load packages
\usepackage{float}
\usepackage{algorithmic}
\usepackage{amsmath,amsfonts}
\usepackage[ruled, vlined]{algorithm2e}
\usepackage{graphicx}
\usepackage{textcomp}
\usepackage{xcolor}
\usepackage{soul}
\usepackage{listings}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{multirow}
\usepackage{booktabs}
\usepackage{makecell}
\usepackage{galois}
\usepackage{mathpartir}
\usepackage{bussproofs}
\usepackage{mathtools}
\usepackage{colortbl}
\usepackage{hhline}
\usepackage{stmaryrd}
\usepackage{microtype}
\usepackage{hyperref}
\usepackage{balance}
\usepackage{adjustbox}
\usepackage{tikz}

% box
\newcommand{\cfbox}[2]{%
  \colorlet{currentcolor}{.}%
  {\color{#1}%
  \fbox{\color{currentcolor}#2}}%
}
\newcommand{\lcolorbox}[2]{\adjustbox{padding=0ex 1ex 1ex 1ex, bgcolor=#1}{#2}}
\newcommand{\rcolorbox}[2]{\adjustbox{padding=1ex 1ex 0ex 1ex, bgcolor=#1}{#2}}

% colors
\definecolor{dkgreen}{rgb}{0, 0.5, 0}
\definecolor{lightred}{rgb}{0.93, 0.57 0.52}
\definecolor{esnt}{rgb}{0.20, 0.20, 0.20}
\definecolor{esparam}{rgb}{0.16, 0.63, 0.59}
\definecolor{esalg}{rgb}{0.12, 0.42, 0.65}
\definecolor{esvar}{rgb}{0.16, 0.63, 0.59}
\definecolor{gray1}{rgb}{0.95, 0.95, 0.95}
\definecolor{gray2}{rgb}{0.85, 0.85, 0.85}
\definecolor{gray3}{rgb}{0.75, 0.75, 0.75}

% basic
\newcommand{\inred}[1]{{\color{red}{#1}}}
\newcommand{\todo}{\inred{TODO}}
\newcommand{\powerset}{\mathcal{P}}
\newcommand{\tif}{\text{if} \; }
\newcommand{\telse}{\text{otherwise}}
\newcommand{\tst}{{\; \text{s.t.} \; }}

% tool name
\newcommand{\name}[1]{\textsf{#1}}
\newcommand{\sname}[1]{\name{\small #1}}
\newcommand{\stextbf}[1]{\textbf{\small #1}}
\newcommand{\jiset}{\sname{JISET}}
\newcommand{\jest}{\sname{JEST}}
\newcommand{\jstar}{\sname{JSTAR}}
\newcommand{\jsaver}{\sname{JSAVER}}
\newcommand{\lambdajs}{\lambda_\text{JS}}
\newcommand{\jscert}{\text{JSCert}}
\newcommand{\jsref}{\text{JSRef}}
\newcommand{\kjs}{\text{KJS}}
\newcommand{\javert}{\text{JaVerT}}
\newcommand{\jsil}{\text{JSIL}}
\newcommand{\comfort}{\textsc{Comfort}}

% tool name
\newcommand{\tool}{\jest_{\sname{fs}}}

% JavaScript code style
\lstdefinelanguage{JavaScript}{
  keywords={async, await, break, case, catch, class, const, continue, debugger,
    default, delete, do, else, enum, export, extends, false, finally, for,
    function, if, import, in, of, instanceof, new, null, return, super, switch,
    this, throw, true, try, typeof, let, var, void, while, with, yield},
  keywordstyle=\color{blue}\bfseries,
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  numberstyle=\tiny\color{darkgray},
  numbers=none,
  numbersep=5pt,
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{dkgreen},
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]",
  morestring=[b]`
}
\lstdefinestyle{JS}{
  language=JavaScript,
  extendedchars=true,
  basicstyle=\small\ttfamily,
  showstringspaces=false,
  showspaces=false,
  tabsize=2,
  breaklines=true,
  showtabs=false,
  captionpos=b
}

% codes
\newcommand{\jscode}[1]{\text{\lstinline[style=JS]!#1!}}
\newcommand{\scode}[1]{\texttt{\small{#1}}}

% ECMA-262
\newcommand{\esnt}[1]{\textit{\color{esnt}#1}}
\newcommand{\esparam}[1]{\text{\color{esparam}#1}}
\newcommand{\esntp}[2]{\esnt{#1}_\esparam{[#2]}}
\newcommand{\est}[1]{\textbf{\texttt{#1}}}
\newcommand{\esalg}[1]{{\color{esalg}#1}}
\newcommand{\esvar}[1]{\textit{\color{esvar}#1}}
\newcommand{\esval}[1]{\textbf{#1}}
\newcommand{\escode}[1]{\textbf{\texttt{#1}}}
\newcommand{\esconst}[1]{\name{#1}}
\newcommand{\lab}[1]{{}^{\textbf{#1}}}

% graph coverages
\newcommand{\graph}{\mathbb{G}}
\newcommand{\nodeset}{\mathbb{N}}
\newcommand{\node}{n}
\newcommand{\nodes}{\bar{\node}}
\newcommand{\inodeset}{\nodeset_\iota}
\newcommand{\fnodeset}{\nodeset_f}
\newcommand{\edgeset}{\mathbb{E}}
\newcommand{\edge}[1]{\xrightarrow{#1}}
\newcommand{\call}{\edge{\name{call}}}
\newcommand{\ret}{\edge{\name{ret}}}
\newcommand{\tedge}{\edge{\name{\#t}}}
\newcommand{\fedge}{\edge{\name{\#f}}}
\newcommand{\annotset}{\mathbb{A}}
\newcommand{\annot}{a}
\newcommand{\patset}[1]{\mathbb{P}_{#1}}
\newcommand{\pat}{p}
\newcommand{\addpat}{\pat_\name{add}}
\newcommand{\subpat}{\pat_\name{sub}}
\newcommand{\patmap}[1]{\name{path}_{#1}}
\newcommand{\getfirst}{\name{first}}
\newcommand{\getlast}{\name{last}}
\newcommand{\testset}{\mathbb{T}}
\newcommand{\test}{t}
\newcommand{\addtest}{\test_\name{add}}
\newcommand{\subtest}{\test_\name{sub}}
\newcommand{\prefix}{\preceq}
\newcommand{\subpath}{\sqsubseteq}

% graph coverage
\newcommand{\cover}{\overset{\name{cover}}{\sim}}
\newcommand{\trset}[1]{\mathbb{R}_{#1}}
\newcommand{\tr}{r}
\newcommand{\cov}[1]{C_{#1}}
\newcommand{\nodecov}[1]{\cov{#1}^{\name{node}}}
\newcommand{\kpathcov}[2]{\cov{#2}^{{#1}\name{-path}}}
\newcommand{\norm}[1]{\lVert{#1}\rVert}
\newcommand{\sat}{\vdash}

% feature-sensitive (FS) coverage
\newcommand{\featset}{\mathbb{F}}
\newcommand{\feat}{f}
\newcommand{\addfeat}{\feat_{\name{add}}}
\newcommand{\subfeat}{\feat_{\name{sub}}}
\newcommand{\idfeat}{\feat_{\name{id}}}
\newcommand{\numfeat}{\feat_{\name{B:Number}}}
\newcommand{\feats}{\bar{\feat}}
\newcommand{\featmap}{\name{feat}}
\newcommand{\extfeat}{\name{ext}_\featset}
\newcommand{\extfeats}[1]{\extfeat^{#1}}
\newcommand{\css}[1]{{#1}\!\mid_{\name{call}}}
\newcommand{\fcov}[1]{\cov{#1}^{\name{FS}}}
\newcommand{\fnodecov}[1]{\cov{#1}^{\name{FS}[\name{node}]}}
\newcommand{\ftrset}[1]{\trset{#1}^{\name{FS}}}
\newcommand{\kfcov}[2]{\cov{#2}^{{#1}\name{-FS}}}
\newcommand{\kfnodecov}[2]{\cov{#2}^{{#1}\name{-FS}[\name{node}]}}
\newcommand{\kftrset}[2]{\trset{#2}^{{#1}\name{-FS}}}
\newcommand{\subs}{\rhd}

% feature call path-sensitive (FCPS) coverage
\newcommand{\fcpset}{\featset_\name{cp}}
\newcommand{\fcp}{\feat_\name{cp}}
\newcommand{\fcps}{\bar\fcp}
\newcommand{\extfcp}{\name{ext}_{\fcpset}}
\newcommand{\extfcps}[1]{\extfcp^{#1}}
\newcommand{\fcpcov}[1]{\cov{#1}^{\name{FCPS}}}
\newcommand{\fcpnodecov}[1]{\cov{#1}^{\name{FCPS}[\name{node}]}}
\newcommand{\fcptrset}[1]{\trset{#1}^{\name{FCPS}}}
\newcommand{\kfcpcov}[2]{\cov{#2}^{{#1}\name{-FCPS}}}
\newcommand{\kfcpnodecov}[2]{\cov{#2}^{{#1}\name{-FCPS}[\name{node}]}}
\newcommand{\kfcptrset}[2]{\trset{#2}^{{#1}\name{-FCPS}}}
